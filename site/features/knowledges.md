# 知识管理

知识管理模块提供了对知识库的管理，支持用户上传文件型知识、人工录入的知识、URL爬取的知识。知识上传到知识库被训练之后，有两种主要的使用途径：

1. 为Pilot提供知识，消除大模型由于数据的时效性、准确性等原因产生的幻觉问题。可以认为我们给智能运维助理装载了私域知识，让它执行技能的时候能够更加符合我们的期望
2. 为外部应用提供混合检索+ReRank的能力。有些时候，第三方应用仅仅只需要使用混合知识检索，典型的场景是告警推荐，这个时候第三方应用并不需要使用Pilot那么丰富的能力，它只是希望能够通过告警检索最佳的匹配方案，并且能够预览原文

## 知识库

知识库是知识的聚合，由多个种类的知识聚合而成。在知识库管理的过程，我们主要关注以下几个方面：

* 哪些知识组成了这个知识库
* 如何使用混合检索+ReRank，让检索变得更加准确
* 混合搜索的时候，语义检索和文本检索的权重是如何分配的
* 对知识使用怎么样的分块模式

总的来说，我们会在知识库这里对知识加工进行精细化的配置

## 知识

OpsPilot能够管理知识，包括 `文件知识`、`手工录入`、`网页知识`

### 文本知识

在日常运维过程中，会产生多种类型的知识，他们一般会以文件类型存在，这也是OpsPilot知识库中最主要的私域知识来源。OpsPilot支持对以下知识进行知识解析

* Markdown
* Word
* Excel
* CSV
* PPT
* TXT

### 手工录入

* [ ] 运维脚本的代码段、零散的碎片知识，都适合用手工录入的方式形成知识，让OpsPilot能够对其进行使用

### 网页知识

互联网上有非常多有用的知识，例如RabbitMQ的官方文档、Redis的官方文档，这些软件会因为对应版本的不一样，具备不一样的特性，或者具备不一样的命令行参数，这种时候我们可以使用网页知识，对他们进行快速、持续的知识捕获

## API

### 知识检索

> POST  /api/knowledge_search/search/

```
{
  "knowledgebase_folder_ids": [
    1
  ],
  "query": "能监控Linux吗",
  "metadata":{
    "doc_type":"text"
  }
}
```

参数说明

| 变量                     | 描述                             |
| ------------------------ | -------------------------------- |
| knowledgebase_folder_ids | 知识库的ID号数组                 |
| query                    | 搜索语句                         |
| metadata                 | 知识库元数据过滤条件字典，可不填 |
